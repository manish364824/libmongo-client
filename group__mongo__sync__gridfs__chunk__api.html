<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libmongo-client: Mongo GridFS Chunk API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libmongo-client
   &#160;<span id="projectnumber">0.1.6.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mongo GridFS Chunk API</div>  </div>
<div class="ingroups"><a class="el" href="group__mongo__sync__gridfs__api.html">Mongo GridFS API</a></div></div><!--header-->
<div class="contents">

<p>This submodule provides chunk-based access to GridFS files.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Mongo GridFS Chunk API:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__mongo__sync__gridfs__chunk__api.png" border="0" alt="" usemap="#group____mongo____sync____gridfs____chunk____api"/>
<map name="group____mongo____sync____gridfs____chunk____api" id="group____mongo____sync____gridfs____chunk____api">
<area shape="rect" id="node1" href="group__mongo__sync__gridfs__api.html" title="The GridFS API &#45; and related modules, like Mongo GridFS Chunk API and Mongo GridFS Streaming API &#45; pr..." alt="" coords="7,5,137,35"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga54de2ac6d88a819b4c6b9a1560fbe9c0"><td class="memItemLeft" align="right" valign="top">mongo_sync_gridfs_chunked_file *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mongo__sync__gridfs__chunk__api.html#ga54de2ac6d88a819b4c6b9a1560fbe9c0">mongo_sync_gridfs_chunked_find</a> (mongo_sync_gridfs *gfs, const bson *query)</td></tr>
<tr class="memdesc:ga54de2ac6d88a819b4c6b9a1560fbe9c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a file on GridFS.  <a href="#ga54de2ac6d88a819b4c6b9a1560fbe9c0"></a><br/></td></tr>
<tr class="memitem:gaf398eaa2d1bfb24f879af6f6899c8278"><td class="memItemLeft" align="right" valign="top">mongo_sync_gridfs_chunked_file *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mongo__sync__gridfs__chunk__api.html#gaf398eaa2d1bfb24f879af6f6899c8278">mongo_sync_gridfs_chunked_file_new_from_buffer</a> (mongo_sync_gridfs *gfs, const bson *metadata, const guint8 *data, gint64 size)</td></tr>
<tr class="memdesc:gaf398eaa2d1bfb24f879af6f6899c8278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload a file to GridFS from a buffer.  <a href="#gaf398eaa2d1bfb24f879af6f6899c8278"></a><br/></td></tr>
<tr class="memitem:gaf846c1a66d71b6d94cf441dad75a8546"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mongo__sync__gridfs__chunk__api.html#gaf846c1a66d71b6d94cf441dad75a8546">mongo_sync_gridfs_chunked_file_free</a> (mongo_sync_gridfs_chunked_file *gfile)</td></tr>
<tr class="memdesc:gaf846c1a66d71b6d94cf441dad75a8546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a GridFS chunked file object.  <a href="#gaf846c1a66d71b6d94cf441dad75a8546"></a><br/></td></tr>
<tr class="memitem:gabff321c07bade7b3528b9beda6de72de"><td class="memItemLeft" align="right" valign="top">mongo_sync_cursor *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mongo__sync__gridfs__chunk__api.html#gabff321c07bade7b3528b9beda6de72de">mongo_sync_gridfs_chunked_file_cursor_new</a> (mongo_sync_gridfs_chunked_file *gfile, gint start, gint num)</td></tr>
<tr class="memdesc:gabff321c07bade7b3528b9beda6de72de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a cursor for a GridFS chunked file.  <a href="#gabff321c07bade7b3528b9beda6de72de"></a><br/></td></tr>
<tr class="memitem:gafcbf8ca35a03d760586dcc853527b765"><td class="memItemLeft" align="right" valign="top">guint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mongo__sync__gridfs__chunk__api.html#gafcbf8ca35a03d760586dcc853527b765">mongo_sync_gridfs_chunked_file_cursor_get_chunk</a> (mongo_sync_cursor *cursor, gint32 *size)</td></tr>
<tr class="memdesc:gafcbf8ca35a03d760586dcc853527b765"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the data of a GridFS file chunk, via a cursor.  <a href="#gafcbf8ca35a03d760586dcc853527b765"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<p>This submodule provides chunk-based access to GridFS files. </p>
<p>Chunk-based access has the advantage of being reasonably lightweight and fast, and the disadvantage of making it harder to do arbitrary reads or multi-part writes.</p>
<p>It's best used when the whole file needs to be retrieved, or when uploading files that either fit in a buffer, or can be mmapped. </p>
<h2>Function Documentation</h2>
<a class="anchor" id="gafcbf8ca35a03d760586dcc853527b765"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">guint8* mongo_sync_gridfs_chunked_file_cursor_get_chunk </td>
          <td>(</td>
          <td class="paramtype">mongo_sync_cursor *&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gint32 *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the data of a GridFS file chunk, via a cursor. </p>
<p>Once we have a cursor, it can be iterated over with <a class="el" href="group__mongo__sync__cursor.html#ga321b3b8a39de8b5afd3accd9b9310d22" title="Iterate a MongoDB cursor.">mongo_sync_cursor_next()</a>, and its data can be conveniently accessed with this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cursor</td><td>is the cursor object to work with. </td></tr>
    <tr><td class="paramname">size</td><td>is a pointer to a variable where the chunk's actual size can be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to newly allocated memory that holds the current chunk's data, or NULL on error. It is the responsibility of the caller to free this once it is no longer needed. </dd></dl>

</div>
</div>
<a class="anchor" id="gabff321c07bade7b3528b9beda6de72de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo_sync_cursor* mongo_sync_gridfs_chunked_file_cursor_new </td>
          <td>(</td>
          <td class="paramtype">mongo_sync_gridfs_chunked_file *&#160;</td>
          <td class="paramname"><em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gint&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gint&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a cursor for a GridFS chunked file. </p>
<p>The cursor can be used (via mongo_sync_gridfs_file_cursor_get_chunk()) to retrieve a GridFS file chunk by chunk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gfile</td><td>is the GridFS chunked file to work with. </td></tr>
    <tr><td class="paramname">start</td><td>is the starting chunk. </td></tr>
    <tr><td class="paramname">num</td><td>is the total number of chunks to make a cursor for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated cursor object, or NULL on error. It is the responsibility of the caller to free the cursor once it is no longer needed. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf846c1a66d71b6d94cf441dad75a8546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo_sync_gridfs_chunked_file_free </td>
          <td>(</td>
          <td class="paramtype">mongo_sync_gridfs_chunked_file *&#160;</td>
          <td class="paramname"><em>gfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a GridFS chunked file object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gfile</td><td>is the file object to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf398eaa2d1bfb24f879af6f6899c8278"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo_sync_gridfs_chunked_file* mongo_sync_gridfs_chunked_file_new_from_buffer </td>
          <td>(</td>
          <td class="paramtype">mongo_sync_gridfs *&#160;</td>
          <td class="paramname"><em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bson *&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const guint8 *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gint64&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upload a file to GridFS from a buffer. </p>
<p>Create a new file on GridFS from a buffer, using custom meta-data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gfs</td><td>is the GridFS to create the file on. </td></tr>
    <tr><td class="paramname">metadata</td><td>is the (optional) file metadata. </td></tr>
    <tr><td class="paramname">data</td><td>is the data to store on GridFS. </td></tr>
    <tr><td class="paramname">size</td><td>is the size of the data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated file object, or NULL on error. It is the responsibility of the caller to free the returned object once it is no longer needed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The metadata MUST NOT contain any of the required GridFS metadata fields (_id, length, chunkSize, uploadDate, md5), otherwise a conflict will occurr, against which the function does not guard by design. </dd></dl>

</div>
</div>
<a class="anchor" id="ga54de2ac6d88a819b4c6b9a1560fbe9c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo_sync_gridfs_chunked_file* mongo_sync_gridfs_chunked_find </td>
          <td>(</td>
          <td class="paramtype">mongo_sync_gridfs *&#160;</td>
          <td class="paramname"><em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bson *&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a file on GridFS. </p>
<p>Finds a file on GridFS, based on a custom query.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gfs</td><td>is the GridFS to find the file in. </td></tr>
    <tr><td class="paramname">query</td><td>is the custom query based on which the file shall be sought.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated chunked file object, or NULL on error. It is the responsibility of the caller to free the returned object once it is no longer needed. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 21 2012 12:20:08 for libmongo-client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
